import{s as le,h as G,r as Ie,b as Q,n as be,k as Y,l as oe,d as he,u as me,g as _e,e as pe,m as lt,j as re}from"./scheduler.858dac91.js";import{S as ne,i as ie,g as w,s as V,m as ve,h as L,j as S,x as Z,c as N,n as ke,f as y,k as v,l as x,a as B,y as k,C as se,z as W,o as Le,D as ae,d as E,p as ee,t as D,b as te,r as $,u as X,v as J,w as K,A as Ke,e as Ve,B as ue}from"./index.258ec88e.js";import{e as ye}from"./each.e59479a4.js";import{w as nt}from"./index.d4392256.js";import{w as it}from"./stores.de040ef6.js";function Qe(l,e){const i={},t={},n={$$scope:1};let s=l.length;for(;s--;){const o=l[s],r=e[s];if(r){for(const u in o)u in r||(t[u]=1);for(const u in r)n[u]||(i[u]=r[u],n[u]=1);l[s]=r}else for(const u in o)n[u]=1}for(const o in t)o in i||(i[o]=void 0);return i}function Ye(l){return typeof l=="object"&&l!==null?l:{}}function st(l){let e,i,t,n="code length",s,o,r,u,d,f,c,h,m,p,_,a="base",g,O,C,q;return{c(){e=w("div"),i=w("div"),t=w("label"),t.textContent=n,s=V(),o=w("div"),r=w("input"),u=V(),d=w("p"),f=ve(l[0]),c=V(),h=w("hr"),m=V(),p=w("div"),_=w("label"),_.textContent=a,g=V(),O=w("input"),this.h()},l(A){e=L(A,"DIV",{class:!0});var z=S(e);i=L(z,"DIV",{class:!0});var F=S(i);t=L(F,"LABEL",{for:!0,style:!0,class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-wgfsn5"&&(t.textContent=n),s=N(F),o=L(F,"DIV",{class:!0});var b=S(o);r=L(b,"INPUT",{id:!0,type:!0,name:!0,min:!0,max:!0}),u=N(b),d=L(b,"P",{});var M=S(d);f=ke(M,l[0]),M.forEach(y),b.forEach(y),F.forEach(y),c=N(z),h=L(z,"HR",{class:!0}),m=N(z),p=L(z,"DIV",{class:!0});var I=S(p);_=L(I,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Z(_)!=="svelte-f24ihi"&&(_.textContent=a),g=N(I),O=L(I,"INPUT",{id:!0,type:!0,min:!0,max:!0,style:!0}),I.forEach(y),z.forEach(y),this.h()},h(){v(t,"for","codeLength"),x(t,"text-align","left"),v(t,"class","svelte-1p37nvj"),v(r,"id","codeLength"),v(r,"type","range"),v(r,"name","codeLength"),v(r,"min","3"),v(r,"max","6"),v(o,"class","flex center space-between"),v(i,"class","flex center space-between svelte-1p37nvj"),v(h,"class","svelte-1p37nvj"),v(_,"for","base"),v(_,"class","svelte-1p37nvj"),v(O,"id","base"),v(O,"type","number"),v(O,"min","3"),v(O,"max","36"),x(O,"width","3rem"),v(p,"class","flex center space-between svelte-1p37nvj"),v(e,"class","controls svelte-1p37nvj")},m(A,z){B(A,e,z),k(e,i),k(i,t),k(i,s),k(i,o),k(o,r),se(r,l[0]),k(o,u),k(o,d),k(d,f),k(e,c),k(e,h),k(e,m),k(e,p),k(p,_),k(p,g),k(p,O),se(O,l[1]),C||(q=[W(r,"change",l[2]),W(r,"input",l[2]),W(O,"input",l[3])],C=!0)},p(A,[z]){z&1&&se(r,A[0]),z&1&&Le(f,A[0]),z&2&&ae(O.value)!==A[1]&&se(O,A[1])},i:G,o:G,d(A){A&&y(e),C=!1,Ie(q)}}}function ot(l,e,i){let{codeLength:t,base:n}=e;function s(){t=ae(this.value),i(0,t)}function o(){n=ae(this.value),i(1,n)}return l.$$set=r=>{"codeLength"in r&&i(0,t=r.codeLength),"base"in r&&i(1,n=r.base)},[t,n,s,o]}class rt extends ne{constructor(e){super(),ie(this,e,ot,st,le,{codeLength:0,base:1})}}function ut(l){if(!l.length)return;const e=l.split(/\s/).filter(t=>t.length),i=[];for(;e.length;){const t={code:e.shift().split("").map(Math.floor),included:Math.floor(e.shift()),sorted:Math.floor(e.shift())};i.push(t)}return i}function ft(l){if(l.length)return l.map(e=>`${e.code.join("")} ${e.included} ${e.sorted}
`).join("")}function Ne(l){let e,i="import",t,n,s,o;return{c(){e=w("button"),e.textContent=i,t=V(),n=w("input"),this.h()},l(r){e=L(r,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1239hf0"&&(e.textContent=i),t=N(r),n=L(r,"INPUT",{style:!0,type:!0,name:!0,id:!0,class:!0}),this.h()},h(){v(e,"class","svelte-tqwhnu"),x(n,"display","none"),v(n,"type","file"),v(n,"name","file"),v(n,"id","fileInput"),v(n,"class","svelte-tqwhnu")},m(r,u){B(r,e,u),B(r,t,u),B(r,n,u),l[8](n),s||(o=[W(e,"click",l[7]),W(n,"change",l[3])],s=!0)},p:G,d(r){r&&(y(e),y(t),y(n)),l[8](null),s=!1,Ie(o)}}}function Re(l){let e,i="export",t,n,s,o;return{c(){e=w("button"),e.textContent=i,t=V(),n=w("a"),this.h()},l(r){e=L(r,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1y72hyi"&&(e.textContent=i),t=N(r),n=L(r,"A",{style:!0,class:!0}),S(n).forEach(y),this.h()},h(){v(e,"class","svelte-tqwhnu"),x(n,"display","none"),v(n,"class","svelte-tqwhnu")},m(r,u){B(r,e,u),B(r,t,u),B(r,n,u),l[9](n),s||(o=W(e,"click",l[4]),s=!0)},p:G,d(r){r&&(y(e),y(t),y(n)),l[9](null),s=!1,o()}}}function dt(l){let e,i,t=l[0].import&&Ne(l),n=l[0].export&&Re(l);return{c(){e=w("div"),t&&t.c(),i=V(),n&&n.c(),this.h()},l(s){e=L(s,"DIV",{class:!0});var o=S(e);t&&t.l(o),i=N(o),n&&n.l(o),o.forEach(y),this.h()},h(){v(e,"class","bigbox flex center svelte-tqwhnu")},m(s,o){B(s,e,o),t&&t.m(e,null),k(e,i),n&&n.m(e,null)},p(s,[o]){s[0].import?t?t.p(s,o):(t=Ne(s),t.c(),t.m(e,i)):t&&(t.d(1),t=null),s[0].export?n?n.p(s,o):(n=Re(s),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:G,o:G,d(s){s&&y(e),t&&t.d(),n&&n.d()}}}function ct(l,e,i){let{options:t={import:!1,export:!1},riddle:n,onimport:s=()=>{}}=e,o,r;function u(m){o.files[0].text().then(p=>{s(ut(p))}),i(1,o.value="",o)}function d(m){i(2,r.href="data:text/plain;charset=utf-8,"+ft(n),r),i(2,r.download=new Date().toString(),r),r.click()}const f=()=>o.click();function c(m){Q[m?"unshift":"push"](()=>{o=m,i(1,o)})}function h(m){Q[m?"unshift":"push"](()=>{r=m,i(2,r)})}return l.$$set=m=>{"options"in m&&i(0,t=m.options),"riddle"in m&&i(5,n=m.riddle),"onimport"in m&&i(6,s=m.onimport)},[t,o,r,u,d,n,s,f,c,h]}class at extends ne{constructor(e){super(),ie(this,e,ct,dt,le,{options:0,riddle:5,onimport:6})}}function ht(l){let e,i,t,n;return{c(){e=w("input"),this.h()},l(s){e=L(s,"INPUT",{class:!0,type:!0,min:!0,max:!0}),this.h()},h(){v(e,"class",i=be(l[3].class)+" svelte-6p9lf9"),e.disabled=l[1],v(e,"type","number"),v(e,"min","0"),v(e,"max",l[2])},m(s,o){B(s,e,o),se(e,l[0]),t||(n=[W(e,"focus",mt),W(e,"input",l[4])],t=!0)},p(s,[o]){o&8&&i!==(i=be(s[3].class)+" svelte-6p9lf9")&&v(e,"class",i),o&2&&(e.disabled=s[1]),o&4&&v(e,"max",s[2]),o&1&&ae(e.value)!==s[0]&&se(e,s[0])},i:G,o:G,d(s){s&&y(e),t=!1,Ie(n)}}}const mt=l=>l.target.select();function _t(l,e,i){let{value:t,disabled:n,max:s}=e;function o(){t=ae(this.value),i(0,t)}return l.$$set=r=>{i(3,e=Y(Y({},e),oe(r))),"value"in r&&i(0,t=r.value),"disabled"in r&&i(1,n=r.disabled),"max"in r&&i(2,s=r.max)},e=oe(e),[t,n,s,e,o]}class Ce extends ne{constructor(e){super(),ie(this,e,_t,ht,le,{value:0,disabled:1,max:2})}}function Se(l){let e;const i=l[5].default,t=he(i,l,l[4],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&16)&&me(t,i,n,n[4],e?pe(i,n[4],s,null):_e(n[4]),null)},i(n){e||(E(t,n),e=!0)},o(n){D(t,n),e=!1},d(n){t&&t.d(n)}}}function pt(l){let e,i,t,n,s,o,r,u,d,f=!l[2]&&Se(l);return{c(){e=w("div"),i=w("button"),t=ve("^"),o=V(),f&&f.c(),this.h()},l(c){e=L(c,"DIV",{class:!0,style:!0});var h=S(e);i=L(h,"BUTTON",{class:!0,style:!0});var m=S(i);t=ke(m,"^"),m.forEach(y),o=N(h),f&&f.l(h),h.forEach(y),this.h()},h(){v(i,"class",n=be("min-button "+(l[2]?"minimized":""))+" svelte-xlmf7b"),v(i,"style",s=`display: ${l[1]?"initial":"none"}`),v(e,"class","sticky flex column center svelte-xlmf7b"),v(e,"style",l[0])},m(c,h){B(c,e,h),k(e,i),k(i,t),k(e,o),f&&f.m(e,null),r=!0,u||(d=W(i,"click",l[3]),u=!0)},p(c,[h]){(!r||h&4&&n!==(n=be("min-button "+(c[2]?"minimized":""))+" svelte-xlmf7b"))&&v(i,"class",n),(!r||h&2&&s!==(s=`display: ${c[1]?"initial":"none"}`))&&v(i,"style",s),c[2]?f&&(ee(),D(f,1,1,()=>{f=null}),te()):f?(f.p(c,h),h&4&&E(f,1)):(f=Se(c),f.c(),E(f,1),f.m(e,null)),(!r||h&1)&&v(e,"style",c[0])},i(c){r||(E(f),r=!0)},o(c){D(f),r=!1},d(c){c&&y(e),f&&f.d(),u=!1,d()}}}function gt(l,e,i){let{$$slots:t={},$$scope:n}=e,{style:s="",minimizable:o=!1}=e,r=!1;function u(d){i(2,r=!r)}return l.$$set=d=>{"style"in d&&i(0,s=d.style),"minimizable"in d&&i(1,o=d.minimizable),"$$scope"in d&&i(4,n=d.$$scope)},[s,o,r,u,n,t]}class Ze extends ne{constructor(e){super(),ie(this,e,gt,pt,le,{style:0,minimizable:1})}}function bt(l){let e;const i=l[1].default,t=he(i,l,l[2],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&4)&&me(t,i,n,n[2],e?pe(i,n[2],s,null):_e(n[2]),null)},i(n){e||(E(t,n),e=!0)},o(n){D(t,n),e=!1},d(n){t&&t.d(n)}}}function vt(l){let e,i;const t=[{style:"top: 0; padding-top: 0; background-color: black;"},l[0]];let n={$$slots:{default:[bt]},$$scope:{ctx:l}};for(let s=0;s<t.length;s+=1)n=Y(n,t[s]);return e=new Ze({props:n}),{c(){$(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,o){J(e,s,o),i=!0},p(s,[o]){const r=o&1?Qe(t,[t[0],Ye(s[0])]):{};o&4&&(r.$$scope={dirty:o,ctx:s}),e.$set(r)},i(s){i||(E(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){K(e,s)}}}function kt(l,e,i){let{$$slots:t={},$$scope:n}=e;return l.$$set=s=>{i(0,e=Y(Y({},e),oe(s))),"$$scope"in s&&i(2,n=s.$$scope)},e=oe(e),[e,t,n]}class yt extends ne{constructor(e){super(),ie(this,e,kt,vt,le,{})}}function Et(l){let e;const i=l[1].default,t=he(i,l,l[2],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&4)&&me(t,i,n,n[2],e?pe(i,n[2],s,null):_e(n[2]),null)},i(n){e||(E(t,n),e=!0)},o(n){D(t,n),e=!1},d(n){t&&t.d(n)}}}function wt(l){let e,i;const t=[{style:"bottom: 0; padding-bottom: 0;"},l[0]];let n={$$slots:{default:[Et]},$$scope:{ctx:l}};for(let s=0;s<t.length;s+=1)n=Y(n,t[s]);return e=new Ze({props:n}),{c(){$(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,o){J(e,s,o),i=!0},p(s,[o]){const r=o&1?Qe(t,[t[0],Ye(s[0])]):{};o&4&&(r.$$scope={dirty:o,ctx:s}),e.$set(r)},i(s){i||(E(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){K(e,s)}}}function Lt(l,e,i){let{$$slots:t={},$$scope:n}=e;return l.$$set=s=>{i(0,e=Y(Y({},e),oe(s))),"$$scope"in s&&i(2,n=s.$$scope)},e=oe(e),[e,t,n]}class Ct extends ne{constructor(e){super(),ie(this,e,Lt,wt,le,{})}}const It=l=>({}),Be=l=>({});function ze(l,e,i){const t=l.slice();return t[21]=e[i],t[22]=e,t[23]=i,t}function Ae(l,e,i){const t=l.slice();return t[24]=e[i],t[25]=e,t[26]=i,t}const jt=l=>({}),Ue=l=>({});function qe(l){let e,i='<div class="flex center mobile-inst space-between svelte-385h2u"><p>incl</p><p>=</p><p class="included svelte-385h2u">included</p></div> <div class="flex center mobile-inst space-between svelte-385h2u"><p>sort</p><p>=</p><p class="sorted svelte-385h2u">sorted</p></div>';return{c(){e=w("div"),e.innerHTML=i,this.h()},l(t){e=L(t,"DIV",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-t6ue9k"&&(e.innerHTML=i),this.h()},h(){v(e,"class","mobile-inst-box svelte-385h2u")},m(t,n){B(t,e,n)},d(t){t&&y(e)}}}function He(l){let e,i,t;function n(o){l[13](o)}let s={options:l[3]?l[7]:l[5],onimport:l[10]};return l[1]!==void 0&&(s.riddle=l[1]),e=new at({props:s}),Q.push(()=>ue(e,"riddle",n)),{c(){$(e.$$.fragment)},l(o){X(e.$$.fragment,o)},m(o,r){J(e,o,r),t=!0},p(o,r){const u={};r&40&&(u.options=o[3]?o[7]:o[5]),!i&&r&2&&(i=!0,u.riddle=o[1],re(()=>i=!1)),e.$set(u)},i(o){t||(E(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){K(e,o)}}}function Fe(l){let e,i,t,n;function s(u){l[14](u)}function o(u){l[15](u)}let r={};return l[0]!==void 0&&(r.codeLength=l[0]),l[2]!==void 0&&(r.base=l[2]),e=new rt({props:r}),Q.push(()=>ue(e,"codeLength",s)),Q.push(()=>ue(e,"base",o)),{c(){$(e.$$.fragment)},l(u){X(e.$$.fragment,u)},m(u,d){J(e,u,d),n=!0},p(u,d){const f={};!i&&d&1&&(i=!0,f.codeLength=u[0],re(()=>i=!1)),!t&&d&4&&(t=!0,f.base=u[2],re(()=>t=!1)),e.$set(f)},i(u){n||(E(e.$$.fragment,u),n=!0)},o(u){D(e.$$.fragment,u),n=!1},d(u){K(e,u)}}}function We(l){let e;const i=l[12].header,t=he(i,l,l[20],Ue);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&1048576)&&me(t,i,n,n[20],e?pe(i,n[20],s,jt):_e(n[20]),Ue)},i(n){e||(E(t,n),e=!0)},o(n){D(t,n),e=!1},d(n){t&&t.d(n)}}}function Ot(l){let e,i,t,n,s,o=l[6]&&qe(),r=(l[3]||l[5])&&He(l),u=(l[4]||l[3])&&Fe(l),d=l[11].header&&We(l);return{c(){o&&o.c(),e=V(),r&&r.c(),i=V(),u&&u.c(),t=V(),d&&d.c(),n=Ve()},l(f){o&&o.l(f),e=N(f),r&&r.l(f),i=N(f),u&&u.l(f),t=N(f),d&&d.l(f),n=Ve()},m(f,c){o&&o.m(f,c),B(f,e,c),r&&r.m(f,c),B(f,i,c),u&&u.m(f,c),B(f,t,c),d&&d.m(f,c),B(f,n,c),s=!0},p(f,c){f[6]?o||(o=qe(),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),f[3]||f[5]?r?(r.p(f,c),c&40&&E(r,1)):(r=He(f),r.c(),E(r,1),r.m(i.parentNode,i)):r&&(ee(),D(r,1,1,()=>{r=null}),te()),f[4]||f[3]?u?(u.p(f,c),c&24&&E(u,1)):(u=Fe(f),u.c(),E(u,1),u.m(t.parentNode,t)):u&&(ee(),D(u,1,1,()=>{u=null}),te()),f[11].header?d?(d.p(f,c),c&2048&&E(d,1)):(d=We(f),d.c(),E(d,1),d.m(n.parentNode,n)):d&&(ee(),D(d,1,1,()=>{d=null}),te())},i(f){s||(E(r),E(u),E(d),s=!0)},o(f){D(r),D(u),D(d),s=!1},d(f){f&&(y(e),y(i),y(t),y(n)),o&&o.d(f),r&&r.d(f),u&&u.d(f),d&&d.d(f)}}}function Pe(l){let e,i,t;function n(o){l[16](o,l[24],l[25],l[26])}let s={max:l[2]-1,disabled:!l[3]};return l[24]!==void 0&&(s.value=l[24]),e=new Ce({props:s}),Q.push(()=>ue(e,"value",n)),{c(){$(e.$$.fragment)},l(o){X(e.$$.fragment,o)},m(o,r){J(e,o,r),t=!0},p(o,r){l=o;const u={};r&4&&(u.max=l[2]-1),r&8&&(u.disabled=!l[3]),!i&&r&2&&(i=!0,u.value=l[24],re(()=>i=!1)),e.$set(u)},i(o){t||(E(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){K(e,o)}}}function Ge(l){let e,i="x",t,n;function s(){return l[19](l[23])}return{c(){e=w("button"),e.textContent=i,this.h()},l(o){e=L(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-zwg1ay"&&(e.textContent=i),this.h()},h(){v(e,"class","delete-button svelte-385h2u")},m(o,r){B(o,e,r),t||(n=W(e,"click",s),t=!0)},p(o,r){l=o},d(o){o&&y(e),t=!1,n()}}}function $e(l){let e,i,t,n,s,o,r,u,d,f,c=l[6]?"incl":"included",h,m,p,_,a,g,O,C,q=l[6]?"sort":"sorted",A,z,F,b,M=ye(l[21].code),I=[];for(let j=0;j<M.length;j+=1)I[j]=Pe(Ae(l,M,j));const fe=j=>D(I[j],1,1,()=>{I[j]=null});function et(j){l[17](j,l[21])}let je={disabled:!l[3],max:l[0]};l[21].included!==void 0&&(je.value=l[21].included),r=new Ce({props:je}),Q.push(()=>ue(r,"value",et));function tt(j){l[18](j,l[21])}let Oe={disabled:!l[3],max:l[21].included};l[21].sorted!==void 0&&(Oe.value=l[21].sorted),a=new Ce({props:Oe}),Q.push(()=>ue(a,"value",tt));let U=l[3]&&Ge(l);return{c(){e=w("div"),i=w("div");for(let j=0;j<I.length;j+=1)I[j].c();t=V(),n=w("div"),s=w("div"),o=w("div"),$(r.$$.fragment),d=V(),f=w("label"),h=ve(c),m=V(),p=w("div"),_=w("div"),$(a.$$.fragment),O=V(),C=w("label"),A=ve(q),z=V(),U&&U.c(),F=V(),this.h()},l(j){e=L(j,"DIV",{class:!0,style:!0});var T=S(e);i=L(T,"DIV",{class:!0});var H=S(i);for(let Ee=0;Ee<I.length;Ee+=1)I[Ee].l(H);H.forEach(y),t=N(T),n=L(T,"DIV",{class:!0});var P=S(n);s=L(P,"DIV",{class:!0});var R=S(s);o=L(R,"DIV",{class:!0});var de=S(o);X(r.$$.fragment,de),de.forEach(y),d=N(R),f=L(R,"LABEL",{for:!0});var Te=S(f);h=ke(Te,c),Te.forEach(y),R.forEach(y),m=N(P),p=L(P,"DIV",{class:!0});var ge=S(p);_=L(ge,"DIV",{class:!0});var De=S(_);X(a.$$.fragment,De),De.forEach(y),O=N(ge),C=L(ge,"LABEL",{for:!0});var Me=S(C);A=ke(Me,q),Me.forEach(y),ge.forEach(y),P.forEach(y),z=N(T),U&&U.l(T),F=N(T),T.forEach(y),this.h()},h(){v(i,"class","code svelte-385h2u"),v(o,"class","included svelte-385h2u"),v(f,"for","included"),v(s,"class","flex column"),v(_,"class","sorted svelte-385h2u"),v(C,"for","sorted"),v(p,"class","flex column"),v(n,"class","flex svelte-385h2u"),v(e,"class","hint flex center svelte-385h2u"),x(e,"align-items","flex-start")},m(j,T){B(j,e,T),k(e,i);for(let H=0;H<I.length;H+=1)I[H]&&I[H].m(i,null);k(e,t),k(e,n),k(n,s),k(s,o),J(r,o,null),k(s,d),k(s,f),k(f,h),k(n,m),k(n,p),k(p,_),J(a,_,null),k(p,O),k(p,C),k(C,A),k(e,z),U&&U.m(e,null),k(e,F),b=!0},p(j,T){if(l=j,T&14){M=ye(l[21].code);let R;for(R=0;R<M.length;R+=1){const de=Ae(l,M,R);I[R]?(I[R].p(de,T),E(I[R],1)):(I[R]=Pe(de),I[R].c(),E(I[R],1),I[R].m(i,null))}for(ee(),R=M.length;R<I.length;R+=1)fe(R);te()}const H={};T&8&&(H.disabled=!l[3]),T&1&&(H.max=l[0]),!u&&T&2&&(u=!0,H.value=l[21].included,re(()=>u=!1)),r.$set(H),(!b||T&64)&&c!==(c=l[6]?"incl":"included")&&Le(h,c);const P={};T&8&&(P.disabled=!l[3]),T&2&&(P.max=l[21].included),!g&&T&2&&(g=!0,P.value=l[21].sorted,re(()=>g=!1)),a.$set(P),(!b||T&64)&&q!==(q=l[6]?"sort":"sorted")&&Le(A,q),l[3]?U?U.p(l,T):(U=Ge(l),U.c(),U.m(e,F)):U&&(U.d(1),U=null)},i(j){if(!b){for(let T=0;T<M.length;T+=1)E(I[T]);E(r.$$.fragment,j),E(a.$$.fragment,j),b=!0}},o(j){I=I.filter(Boolean);for(let T=0;T<I.length;T+=1)D(I[T]);D(r.$$.fragment,j),D(a.$$.fragment,j),b=!1},d(j){j&&y(e),Ke(I,j),K(r),K(a),U&&U.d()}}}function Xe(l){let e,i="+",t,n;return{c(){e=w("button"),e.textContent=i,this.h()},l(s){e=L(s,"BUTTON",{id:!0,style:!0,"data-svelte-h":!0}),Z(e)!=="svelte-sxuadl"&&(e.textContent=i),this.h()},h(){v(e,"id","addButton"),x(e,"margin","1.5rem"),x(e,"padding",".2rem 1rem")},m(s,o){B(s,e,o),t||(n=W(e,"click",l[9]),t=!0)},p:G,d(s){s&&y(e),t=!1,n()}}}function Je(l){let e,i;return e=new Ct({props:{$$slots:{default:[Tt]},$$scope:{ctx:l}}}),{c(){$(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,n){J(e,t,n),i=!0},p(t,n){const s={};n&1048576&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){i||(E(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){K(e,t)}}}function Tt(l){let e;const i=l[12].footer,t=he(i,l,l[20],Be);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&1048576)&&me(t,i,n,n[20],e?pe(i,n[20],s,It):_e(n[20]),Be)},i(n){e||(E(t,n),e=!0)},o(n){D(t,n),e=!1},d(n){t&&t.d(n)}}}function Dt(l){let e,i,t,n,s="",o,r,u,d,f;i=new yt({props:{minimizable:!0,$$slots:{default:[Ot]},$$scope:{ctx:l}}});let c=ye(l[1]??[]),h=[];for(let a=0;a<c.length;a+=1)h[a]=$e(ze(l,c,a));const m=a=>D(h[a],1,1,()=>{h[a]=null});let p=l[3]&&Xe(l),_=l[11].footer&&Je(l);return{c(){e=w("div"),$(i.$$.fragment),t=V(),n=w("div"),n.innerHTML=s,o=V(),r=w("div");for(let a=0;a<h.length;a+=1)h[a].c();u=V(),p&&p.c(),d=V(),_&&_.c(),this.h()},l(a){e=L(a,"DIV",{class:!0});var g=S(e);X(i.$$.fragment,g),t=N(g),n=L(g,"DIV",{style:!0,"data-svelte-h":!0}),Z(n)!=="svelte-1kttkqm"&&(n.innerHTML=s),o=N(g),r=L(g,"DIV",{class:!0});var O=S(r);for(let C=0;C<h.length;C+=1)h[C].l(O);O.forEach(y),u=N(g),p&&p.l(g),d=N(g),_&&_.l(g),g.forEach(y),this.h()},h(){x(n,"margin","1rem"),v(r,"class","hints"),v(e,"class","bigbox flex column center svelte-385h2u")},m(a,g){B(a,e,g),J(i,e,null),k(e,t),k(e,n),k(e,o),k(e,r);for(let O=0;O<h.length;O+=1)h[O]&&h[O].m(r,null);k(e,u),p&&p.m(e,null),k(e,d),_&&_.m(e,null),f=!0},p(a,[g]){const O={};if(g&1050751&&(O.$$scope={dirty:g,ctx:a}),i.$set(O),g&335){c=ye(a[1]??[]);let C;for(C=0;C<c.length;C+=1){const q=ze(a,c,C);h[C]?(h[C].p(q,g),E(h[C],1)):(h[C]=$e(q),h[C].c(),E(h[C],1),h[C].m(r,null))}for(ee(),C=c.length;C<h.length;C+=1)m(C);te()}a[3]?p?p.p(a,g):(p=Xe(a),p.c(),p.m(e,d)):p&&(p.d(1),p=null),a[11].footer?_?(_.p(a,g),g&2048&&E(_,1)):(_=Je(a),_.c(),E(_,1),_.m(e,null)):_&&(ee(),D(_,1,1,()=>{_=null}),te())},i(a){if(!f){E(i.$$.fragment,a);for(let g=0;g<c.length;g+=1)E(h[g]);E(_),f=!0}},o(a){D(i.$$.fragment,a),h=h.filter(Boolean);for(let g=0;g<h.length;g+=1)D(h[g]);D(_),f=!1},d(a){a&&y(e),K(i),Ke(h,a),p&&p.d(),_&&_.d()}}}function Mt(l,e,i){let{$$slots:t={},$$scope:n}=e;const s=lt(t);let{codeLength:o=3,riddle:r,contenteditable:u=!1,base:d=10,showControls:f=!1,fileSettings:c={}}=e;const h={import:!0,export:!0},m=nt(u?r||[{code:Array.from({length:o},()=>0),included:0,sorted:0}]:r);function p(){const b={code:Array.from({length:o},()=>0),included:0,sorted:0};m.update(M=>M.concat(b))}function _(b){i(0,o=b[0].code.length),m.set(b)}m.subscribe(b=>i(1,r=b));let a=!1;it.subscribe(b=>{i(6,a=b.isMobile)});function g(b){r=b,i(1,r)}function O(b){o=b,i(0,o)}function C(b){d=b,i(2,d)}function q(b,M,I,fe){I[fe]=b,i(1,r)}function A(b,M){l.$$.not_equal(M.included,b)&&(M.included=b,i(1,r))}function z(b,M){l.$$.not_equal(M.sorted,b)&&(M.sorted=b,i(1,r))}const F=b=>{m.update(M=>r.filter((I,fe)=>fe!=b))};return l.$$set=b=>{"codeLength"in b&&i(0,o=b.codeLength),"riddle"in b&&i(1,r=b.riddle),"contenteditable"in b&&i(3,u=b.contenteditable),"base"in b&&i(2,d=b.base),"showControls"in b&&i(4,f=b.showControls),"fileSettings"in b&&i(5,c=b.fileSettings),"$$scope"in b&&i(20,n=b.$$scope)},l.$$.update=()=>{l.$$.dirty&11&&u&&(m.update(b=>r),m.update(b=>b==null?void 0:b.map(M=>{for(;M.code.length!=o;)M.code.length>o?M.code.pop():M.code.push(0);return M})))},[o,r,d,u,f,c,a,h,m,p,_,s,t,g,O,C,q,A,z,F,n]}class Xt extends ne{constructor(e){super(),ie(this,e,Mt,Dt,le,{codeLength:0,riddle:1,contenteditable:3,base:2,showControls:4,fileSettings:5})}}const ce=l=>"0".repeat(l).split("").map(e=>({include:{},exclude:{}})),we=l=>l.reduce((e,i)=>({include:{...e.include,...i.include},exclude:{...e.exclude,...i.exclude}}));function Vt(l,e=10,i=!0){const t=l.map(u=>Bt(u,e)),n=l[0].code.length,s=[];function o(u=-1,d=ce(n)){for(const f of t[u+1]){const c=Rt(d,f);c&&(u+1==t.length-1?s.push(c):o(u+1,c))}}o();const r=s.map(u=>Nt(u,e)).filter(u=>u);return i?r:r.filter(u=>!u.some((d,f,c)=>c.indexOf(d)!=f))}function Nt(l,e=10){const i=s=>l.reduce((o,r)=>o+Object.keys(r.include).map(Math.floor).filter(u=>u==s).length,0),t=()=>l.flatMap(s=>Object.keys(s.include).map(Math.floor).filter(r=>i(r)==1)),n=()=>l.flatMap(s=>{const o=Object.keys(s.include).map(Math.floor);return o.length==1?o:[]});l.forEach(s=>{if(Object.keys(s.exclude).length==e-1)for(let o=0;o<e;o++)s.exclude[o]||(s.include[o]=!0)});for(let s=t(),o=n(),r=!0;r;s=t()){r=!1;for(const u of s)l.forEach(d=>{for(const f in d.include)f!=u&&d.include[u]&&(delete d.include[f],r=!0)});for(const u of o)l.forEach(d=>{Object.keys(d.include).length>1&&d.include[u]&&(delete d.include[u],r=!0)});o=n()}if(l.every(s=>Object.keys(s.include).length==1))return l.map(s=>Math.floor(Object.keys(s.include)[0]))}function Rt(l,e){const i=St(l,e),t=we(i),n=we(l),s=we(e);if([n,s].every(o=>Object.keys(o.include).every(r=>t.include[r])))return i}function St(l,e){const i=l.length,t=ce(i);for(let n=0;n<i;n++){t[n].include={...l[n].include,...e[n].include},t[n].exclude={...l[n].exclude,...e[n].exclude};for(const s in t[n].include)t[n].include[s]&&t[n].exclude[s]&&delete t[n].include[s]}return t}function Bt(l,e=10){const{code:i,included:t,sorted:n}=l,s=i.length;if(t>s)return[];if(t==0){const d=ce(s);for(const f of d)i.forEach(c=>f.exclude[c]=!0);return[d]}let o=[],r=0;for(let d=0;d<=s-t;d++){let f=[],c={};for(c[d]=i[d],f.push(c);Object.keys(f.slice(-1)[0]).length<t;){const h=[];for(const m of f){const p=Object.keys(m).length,_=Math.floor(Object.keys(m).sort((a,g)=>g-a)[0]);for(let a=_+1;a<=s-(t-p);a++){const g={...m};if(g[a]=i[a],h.push(g),r++,r>=1e3)return o}}f=h}o=o.concat(f)}const u=[];for(const d of o){if(n==0){const c=ce(s);for(const m in d)for(let p=0;p<s;p++)p==m?c[p].exclude[i[m]]=!0:c[p].include[i[m]]=!0;const h=i.filter(m=>!Object.values(d).includes(m));c.forEach(m=>{h.forEach(p=>{m.exclude[p]=!0})}),u.push(c);continue}const f=[...xe(Object.keys(d).map(c=>Math.floor(c)),n)];for(const c of f){const h=ce(s);for(const _ of c)h[_].include[i[_]]=!0,"0".repeat(e).split("").map((a,g)=>g).filter(a=>a!=i[_]).forEach(a=>h[_].exclude[a]=!0);const m=Object.keys(d).map(Math.floor).filter(_=>!c.includes(_));for(const _ of m)for(let a=0;a<s;a++)a==_?h[a].exclude[i[_]]=!0:c.includes(a)||(h[a].include[i[_]]=!0);const p=i.filter(_=>!Object.values(d).includes(_));h.forEach(_=>{p.forEach(a=>{_.exclude[a]=!0})}),u.push(h)}}return u}function*xe(l,e){for(let i=0;i<l.length;i++)if(e===1)yield[l[i]];else{const t=xe(l.slice(i+1,l.length),e-1);for(let n of t)yield[l[i],...n]}}const zt=l=>l[Math.floor(Math.random()*l.length)],At=l=>l.sort((e,i)=>Math.random()<.5?-1:1);function Ut(l={}){let{solution:e,codeLength:i,maxHints:t,base:n,debug:s,maxTries:o,nullFunc:r}=l;s&&console.time("total"),i=i||3,t=t&&t>1?t:5,n=n||10,s=!!s,o=o||-1,(!e||i!=e.length)&&(e="0".repeat(i).split("").map(h=>Math.floor(Math.random()*n)));const u=e.filter((h,m,p)=>p.indexOf(h)==m).length,d=[];let f,c=0;s&&console.log(`solution: ${e.join(", ")} | maxIncluded: ${u}`);do{if(c>=o||r&&r())return null;d.length>=t&&d.splice(0,d.length);const h=Math.floor(Math.random()*(u+1)),m=[];let p=h==i?Math.floor(Math.random()*(h-1)):Math.floor(Math.random()*(h+1));s&&console.log(`include ${h} sort ${p}`),s&&console.time("included");for(let a=0;a<h;a++){let g;do g=zt(e);while(m.includes(g));m.push(g)}s&&console.timeEnd("included"),s&&console.time("nonincluded");for(let a=0;a<i-h;a++){let g;do g=Math.floor(Math.random()*n);while(e.includes(g));m.push(g)}s&&console.timeEnd("nonincluded");const _=()=>m.reduce((a,g)=>a+(e.indexOf(g)==m.indexOf(g)?1:0),0);for(s&&console.time("shuffle");_()!=p;)At(m);s&&console.timeEnd("shuffle"),d.push({code:m,included:h,sorted:p}),f=Vt(d,n),c++}while(f.length!=1||!f[0].every((h,m)=>e[m]==h));return s&&console.timeEnd("total"),d}const qt=import.meta.url,Ht=10;onmessage=l=>{const e=Ut({...l.data.options,maxTries:Ht,nullFunc:()=>l.data.resultObj.riddle});postMessage(e),close()};function Jt(l,e,i){if(e.status=0,!!window.Worker){i.reset(),delete e.riddle,e.status=1,i.onupdate();for(let t=0;t<i.numWorkers;t++){const n=new Worker(new URL(qt).href,{type:"module"});i.workers.push(n),n.postMessage({options:l,resultObj:e}),n.onmessage=s=>{i.finishedWorkers++;const o=s.data;o&&!e.riddle?(e.riddle=o,e.status=2,i.reset()):e.status!=2&&(i.finishedWorkers<i.numWorkers?e.status=1:e.status=3),i.onupdate()}}}}export{Xt as R,Jt as g,Vt as s};
