import{s as le,h as $,r as Ce,b as Q,n as be,k as Y,l as oe,d as he,u as me,g as _e,e as ge,m as lt,j as re}from"./scheduler.858dac91.js";import{S as ne,i as ie,g as E,s as V,m as ve,h as M,j as S,x as Z,c as N,n as ke,f as y,k as v,l as x,a as B,y as k,C as se,z as P,o as Me,D as ce,d as w,p as ee,t as D,b as te,r as W,u as X,v as J,w as K,A as Ke,e as Ve,B as ue}from"./index.258ec88e.js";import{e as ye}from"./each.e59479a4.js";import{w as nt}from"./index.d4392256.js";import{w as it}from"./stores.de040ef6.js";function Qe(l,e){const i={},t={},n={$$scope:1};let s=l.length;for(;s--;){const o=l[s],r=e[s];if(r){for(const u in o)u in r||(t[u]=1);for(const u in r)n[u]||(i[u]=r[u],n[u]=1);l[s]=r}else for(const u in o)n[u]=1}for(const o in t)o in i||(i[o]=void 0);return i}function Ye(l){return typeof l=="object"&&l!==null?l:{}}function st(l){let e,i,t,n="code length",s,o,r,u,d,f,a,h,m,g,_,c="base",p,j,L,q;return{c(){e=E("div"),i=E("div"),t=E("label"),t.textContent=n,s=V(),o=E("div"),r=E("input"),u=V(),d=E("p"),f=ve(l[0]),a=V(),h=E("hr"),m=V(),g=E("div"),_=E("label"),_.textContent=c,p=V(),j=E("input"),this.h()},l(A){e=M(A,"DIV",{class:!0});var z=S(e);i=M(z,"DIV",{class:!0});var F=S(i);t=M(F,"LABEL",{for:!0,style:!0,class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-wgfsn5"&&(t.textContent=n),s=N(F),o=M(F,"DIV",{class:!0});var b=S(o);r=M(b,"INPUT",{id:!0,type:!0,name:!0,min:!0,max:!0}),u=N(b),d=M(b,"P",{});var O=S(d);f=ke(O,l[0]),O.forEach(y),b.forEach(y),F.forEach(y),a=N(z),h=M(z,"HR",{class:!0}),m=N(z),g=M(z,"DIV",{class:!0});var C=S(g);_=M(C,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Z(_)!=="svelte-f24ihi"&&(_.textContent=c),p=N(C),j=M(C,"INPUT",{id:!0,type:!0,min:!0,max:!0,style:!0}),C.forEach(y),z.forEach(y),this.h()},h(){v(t,"for","codeLength"),x(t,"text-align","left"),v(t,"class","svelte-1p37nvj"),v(r,"id","codeLength"),v(r,"type","range"),v(r,"name","codeLength"),v(r,"min","3"),v(r,"max","6"),v(o,"class","flex center space-between"),v(i,"class","flex center space-between svelte-1p37nvj"),v(h,"class","svelte-1p37nvj"),v(_,"for","base"),v(_,"class","svelte-1p37nvj"),v(j,"id","base"),v(j,"type","number"),v(j,"min","3"),v(j,"max","36"),x(j,"width","3rem"),v(g,"class","flex center space-between svelte-1p37nvj"),v(e,"class","controls svelte-1p37nvj")},m(A,z){B(A,e,z),k(e,i),k(i,t),k(i,s),k(i,o),k(o,r),se(r,l[0]),k(o,u),k(o,d),k(d,f),k(e,a),k(e,h),k(e,m),k(e,g),k(g,_),k(g,p),k(g,j),se(j,l[1]),L||(q=[P(r,"change",l[2]),P(r,"input",l[2]),P(j,"input",l[3])],L=!0)},p(A,[z]){z&1&&se(r,A[0]),z&1&&Me(f,A[0]),z&2&&ce(j.value)!==A[1]&&se(j,A[1])},i:$,o:$,d(A){A&&y(e),L=!1,Ce(q)}}}function ot(l,e,i){let{codeLength:t,base:n}=e;function s(){t=ce(this.value),i(0,t)}function o(){n=ce(this.value),i(1,n)}return l.$$set=r=>{"codeLength"in r&&i(0,t=r.codeLength),"base"in r&&i(1,n=r.base)},[t,n,s,o]}class rt extends ne{constructor(e){super(),ie(this,e,ot,st,le,{codeLength:0,base:1})}}function ut(l){if(!l.length)return;const e=l.split(/\s/).filter(t=>t.length),i=[];for(;e.length;){const t={code:e.shift().split("").map(Math.floor),included:Math.floor(e.shift()),sorted:Math.floor(e.shift())};i.push(t)}return i}function ft(l){if(l.length)return l.map(e=>`${e.code.join("")} ${e.included} ${e.sorted}
`).join("")}function Ne(l){let e,i="import",t,n,s,o;return{c(){e=E("button"),e.textContent=i,t=V(),n=E("input"),this.h()},l(r){e=M(r,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1239hf0"&&(e.textContent=i),t=N(r),n=M(r,"INPUT",{style:!0,type:!0,name:!0,id:!0,class:!0}),this.h()},h(){v(e,"class","svelte-tqwhnu"),x(n,"display","none"),v(n,"type","file"),v(n,"name","file"),v(n,"id","fileInput"),v(n,"class","svelte-tqwhnu")},m(r,u){B(r,e,u),B(r,t,u),B(r,n,u),l[8](n),s||(o=[P(e,"click",l[7]),P(n,"change",l[3])],s=!0)},p:$,d(r){r&&(y(e),y(t),y(n)),l[8](null),s=!1,Ce(o)}}}function Re(l){let e,i="export",t,n,s,o;return{c(){e=E("button"),e.textContent=i,t=V(),n=E("a"),this.h()},l(r){e=M(r,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1y72hyi"&&(e.textContent=i),t=N(r),n=M(r,"A",{style:!0,class:!0}),S(n).forEach(y),this.h()},h(){v(e,"class","svelte-tqwhnu"),x(n,"display","none"),v(n,"class","svelte-tqwhnu")},m(r,u){B(r,e,u),B(r,t,u),B(r,n,u),l[9](n),s||(o=P(e,"click",l[4]),s=!0)},p:$,d(r){r&&(y(e),y(t),y(n)),l[9](null),s=!1,o()}}}function dt(l){let e,i,t=l[0].import&&Ne(l),n=l[0].export&&Re(l);return{c(){e=E("div"),t&&t.c(),i=V(),n&&n.c(),this.h()},l(s){e=M(s,"DIV",{class:!0});var o=S(e);t&&t.l(o),i=N(o),n&&n.l(o),o.forEach(y),this.h()},h(){v(e,"class","bigbox flex center svelte-tqwhnu")},m(s,o){B(s,e,o),t&&t.m(e,null),k(e,i),n&&n.m(e,null)},p(s,[o]){s[0].import?t?t.p(s,o):(t=Ne(s),t.c(),t.m(e,i)):t&&(t.d(1),t=null),s[0].export?n?n.p(s,o):(n=Re(s),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},i:$,o:$,d(s){s&&y(e),t&&t.d(),n&&n.d()}}}function at(l,e,i){let{options:t={import:!1,export:!1},riddle:n,onimport:s=()=>{}}=e,o,r;function u(m){o.files[0].text().then(g=>{s(ut(g))}),i(1,o.value="",o)}function d(m){i(2,r.href="data:text/plain;charset=utf-8,"+ft(n),r),i(2,r.download=new Date().toString(),r),r.click()}const f=()=>o.click();function a(m){Q[m?"unshift":"push"](()=>{o=m,i(1,o)})}function h(m){Q[m?"unshift":"push"](()=>{r=m,i(2,r)})}return l.$$set=m=>{"options"in m&&i(0,t=m.options),"riddle"in m&&i(5,n=m.riddle),"onimport"in m&&i(6,s=m.onimport)},[t,o,r,u,d,n,s,f,a,h]}class ct extends ne{constructor(e){super(),ie(this,e,at,dt,le,{options:0,riddle:5,onimport:6})}}function ht(l){let e,i,t,n;return{c(){e=E("input"),this.h()},l(s){e=M(s,"INPUT",{class:!0,type:!0,min:!0,max:!0}),this.h()},h(){v(e,"class",i=be(l[3].class)+" svelte-1w4vbzd"),e.disabled=l[1],v(e,"type","number"),v(e,"min","0"),v(e,"max",l[2])},m(s,o){B(s,e,o),se(e,l[0]),t||(n=[P(e,"focus",mt),P(e,"input",l[4])],t=!0)},p(s,[o]){o&8&&i!==(i=be(s[3].class)+" svelte-1w4vbzd")&&v(e,"class",i),o&2&&(e.disabled=s[1]),o&4&&v(e,"max",s[2]),o&1&&ce(e.value)!==s[0]&&se(e,s[0])},i:$,o:$,d(s){s&&y(e),t=!1,Ce(n)}}}const mt=l=>l.target.select();function _t(l,e,i){let{value:t,disabled:n,max:s}=e;function o(){t=ce(this.value),i(0,t)}return l.$$set=r=>{i(3,e=Y(Y({},e),oe(r))),"value"in r&&i(0,t=r.value),"disabled"in r&&i(1,n=r.disabled),"max"in r&&i(2,s=r.max)},e=oe(e),[t,n,s,e,o]}class Le extends ne{constructor(e){super(),ie(this,e,_t,ht,le,{value:0,disabled:1,max:2})}}function Se(l){let e;const i=l[5].default,t=he(i,l,l[4],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&16)&&me(t,i,n,n[4],e?ge(i,n[4],s,null):_e(n[4]),null)},i(n){e||(w(t,n),e=!0)},o(n){D(t,n),e=!1},d(n){t&&t.d(n)}}}function gt(l){let e,i,t,n,s,o,r,u,d,f=!l[2]&&Se(l);return{c(){e=E("div"),i=E("button"),t=ve("^"),o=V(),f&&f.c(),this.h()},l(a){e=M(a,"DIV",{class:!0,style:!0});var h=S(e);i=M(h,"BUTTON",{class:!0,style:!0});var m=S(i);t=ke(m,"^"),m.forEach(y),o=N(h),f&&f.l(h),h.forEach(y),this.h()},h(){v(i,"class",n=be("min-button "+(l[2]?"minimized":""))+" svelte-xlmf7b"),v(i,"style",s=`display: ${l[1]?"initial":"none"}`),v(e,"class","sticky flex column center svelte-xlmf7b"),v(e,"style",l[0])},m(a,h){B(a,e,h),k(e,i),k(i,t),k(e,o),f&&f.m(e,null),r=!0,u||(d=P(i,"click",l[3]),u=!0)},p(a,[h]){(!r||h&4&&n!==(n=be("min-button "+(a[2]?"minimized":""))+" svelte-xlmf7b"))&&v(i,"class",n),(!r||h&2&&s!==(s=`display: ${a[1]?"initial":"none"}`))&&v(i,"style",s),a[2]?f&&(ee(),D(f,1,1,()=>{f=null}),te()):f?(f.p(a,h),h&4&&w(f,1)):(f=Se(a),f.c(),w(f,1),f.m(e,null)),(!r||h&1)&&v(e,"style",a[0])},i(a){r||(w(f),r=!0)},o(a){D(f),r=!1},d(a){a&&y(e),f&&f.d(),u=!1,d()}}}function pt(l,e,i){let{$$slots:t={},$$scope:n}=e,{style:s="",minimizable:o=!1}=e,r=!1;function u(d){i(2,r=!r)}return l.$$set=d=>{"style"in d&&i(0,s=d.style),"minimizable"in d&&i(1,o=d.minimizable),"$$scope"in d&&i(4,n=d.$$scope)},[s,o,r,u,n,t]}class Ze extends ne{constructor(e){super(),ie(this,e,pt,gt,le,{style:0,minimizable:1})}}function bt(l){let e;const i=l[1].default,t=he(i,l,l[2],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&4)&&me(t,i,n,n[2],e?ge(i,n[2],s,null):_e(n[2]),null)},i(n){e||(w(t,n),e=!0)},o(n){D(t,n),e=!1},d(n){t&&t.d(n)}}}function vt(l){let e,i;const t=[{style:"top: 0; padding-top: 0; background-color: black;"},l[0]];let n={$$slots:{default:[bt]},$$scope:{ctx:l}};for(let s=0;s<t.length;s+=1)n=Y(n,t[s]);return e=new Ze({props:n}),{c(){W(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,o){J(e,s,o),i=!0},p(s,[o]){const r=o&1?Qe(t,[t[0],Ye(s[0])]):{};o&4&&(r.$$scope={dirty:o,ctx:s}),e.$set(r)},i(s){i||(w(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){K(e,s)}}}function kt(l,e,i){let{$$slots:t={},$$scope:n}=e;return l.$$set=s=>{i(0,e=Y(Y({},e),oe(s))),"$$scope"in s&&i(2,n=s.$$scope)},e=oe(e),[e,t,n]}class yt extends ne{constructor(e){super(),ie(this,e,kt,vt,le,{})}}function wt(l){let e;const i=l[1].default,t=he(i,l,l[2],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&4)&&me(t,i,n,n[2],e?ge(i,n[2],s,null):_e(n[2]),null)},i(n){e||(w(t,n),e=!0)},o(n){D(t,n),e=!1},d(n){t&&t.d(n)}}}function Et(l){let e,i;const t=[{style:"bottom: 0; padding-bottom: 0;"},l[0]];let n={$$slots:{default:[wt]},$$scope:{ctx:l}};for(let s=0;s<t.length;s+=1)n=Y(n,t[s]);return e=new Ze({props:n}),{c(){W(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,o){J(e,s,o),i=!0},p(s,[o]){const r=o&1?Qe(t,[t[0],Ye(s[0])]):{};o&4&&(r.$$scope={dirty:o,ctx:s}),e.$set(r)},i(s){i||(w(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){K(e,s)}}}function Mt(l,e,i){let{$$slots:t={},$$scope:n}=e;return l.$$set=s=>{i(0,e=Y(Y({},e),oe(s))),"$$scope"in s&&i(2,n=s.$$scope)},e=oe(e),[e,t,n]}class Lt extends ne{constructor(e){super(),ie(this,e,Mt,Et,le,{})}}const Ct=l=>({}),Be=l=>({});function ze(l,e,i){const t=l.slice();return t[21]=e[i],t[22]=e,t[23]=i,t}function Ae(l,e,i){const t=l.slice();return t[24]=e[i],t[25]=e,t[26]=i,t}const It=l=>({}),Ue=l=>({});function qe(l){let e,i='<div class="flex center mobile-inst space-between svelte-385h2u"><p>incl</p><p>=</p><p class="included svelte-385h2u">included</p></div> <div class="flex center mobile-inst space-between svelte-385h2u"><p>sort</p><p>=</p><p class="sorted svelte-385h2u">sorted</p></div>';return{c(){e=E("div"),e.innerHTML=i,this.h()},l(t){e=M(t,"DIV",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-t6ue9k"&&(e.innerHTML=i),this.h()},h(){v(e,"class","mobile-inst-box svelte-385h2u")},m(t,n){B(t,e,n)},d(t){t&&y(e)}}}function He(l){let e,i,t;function n(o){l[13](o)}let s={options:l[3]?l[7]:l[5],onimport:l[10]};return l[1]!==void 0&&(s.riddle=l[1]),e=new ct({props:s}),Q.push(()=>ue(e,"riddle",n)),{c(){W(e.$$.fragment)},l(o){X(e.$$.fragment,o)},m(o,r){J(e,o,r),t=!0},p(o,r){const u={};r&40&&(u.options=o[3]?o[7]:o[5]),!i&&r&2&&(i=!0,u.riddle=o[1],re(()=>i=!1)),e.$set(u)},i(o){t||(w(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){K(e,o)}}}function Fe(l){let e,i,t,n;function s(u){l[14](u)}function o(u){l[15](u)}let r={};return l[0]!==void 0&&(r.codeLength=l[0]),l[2]!==void 0&&(r.base=l[2]),e=new rt({props:r}),Q.push(()=>ue(e,"codeLength",s)),Q.push(()=>ue(e,"base",o)),{c(){W(e.$$.fragment)},l(u){X(e.$$.fragment,u)},m(u,d){J(e,u,d),n=!0},p(u,d){const f={};!i&&d&1&&(i=!0,f.codeLength=u[0],re(()=>i=!1)),!t&&d&4&&(t=!0,f.base=u[2],re(()=>t=!1)),e.$set(f)},i(u){n||(w(e.$$.fragment,u),n=!0)},o(u){D(e.$$.fragment,u),n=!1},d(u){K(e,u)}}}function Pe(l){let e;const i=l[12].header,t=he(i,l,l[20],Ue);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&1048576)&&me(t,i,n,n[20],e?ge(i,n[20],s,It):_e(n[20]),Ue)},i(n){e||(w(t,n),e=!0)},o(n){D(t,n),e=!1},d(n){t&&t.d(n)}}}function jt(l){let e,i,t,n,s,o=l[6]&&qe(),r=(l[3]||l[5])&&He(l),u=(l[4]||l[3])&&Fe(l),d=l[11].header&&Pe(l);return{c(){o&&o.c(),e=V(),r&&r.c(),i=V(),u&&u.c(),t=V(),d&&d.c(),n=Ve()},l(f){o&&o.l(f),e=N(f),r&&r.l(f),i=N(f),u&&u.l(f),t=N(f),d&&d.l(f),n=Ve()},m(f,a){o&&o.m(f,a),B(f,e,a),r&&r.m(f,a),B(f,i,a),u&&u.m(f,a),B(f,t,a),d&&d.m(f,a),B(f,n,a),s=!0},p(f,a){f[6]?o||(o=qe(),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),f[3]||f[5]?r?(r.p(f,a),a&40&&w(r,1)):(r=He(f),r.c(),w(r,1),r.m(i.parentNode,i)):r&&(ee(),D(r,1,1,()=>{r=null}),te()),f[4]||f[3]?u?(u.p(f,a),a&24&&w(u,1)):(u=Fe(f),u.c(),w(u,1),u.m(t.parentNode,t)):u&&(ee(),D(u,1,1,()=>{u=null}),te()),f[11].header?d?(d.p(f,a),a&2048&&w(d,1)):(d=Pe(f),d.c(),w(d,1),d.m(n.parentNode,n)):d&&(ee(),D(d,1,1,()=>{d=null}),te())},i(f){s||(w(r),w(u),w(d),s=!0)},o(f){D(r),D(u),D(d),s=!1},d(f){f&&(y(e),y(i),y(t),y(n)),o&&o.d(f),r&&r.d(f),u&&u.d(f),d&&d.d(f)}}}function Ge(l){let e,i,t;function n(o){l[16](o,l[24],l[25],l[26])}let s={max:l[2]-1,disabled:!l[3]};return l[24]!==void 0&&(s.value=l[24]),e=new Le({props:s}),Q.push(()=>ue(e,"value",n)),{c(){W(e.$$.fragment)},l(o){X(e.$$.fragment,o)},m(o,r){J(e,o,r),t=!0},p(o,r){l=o;const u={};r&4&&(u.max=l[2]-1),r&8&&(u.disabled=!l[3]),!i&&r&2&&(i=!0,u.value=l[24],re(()=>i=!1)),e.$set(u)},i(o){t||(w(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){K(e,o)}}}function $e(l){let e,i="x",t,n;function s(){return l[19](l[23])}return{c(){e=E("button"),e.textContent=i,this.h()},l(o){e=M(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-zwg1ay"&&(e.textContent=i),this.h()},h(){v(e,"class","delete-button svelte-385h2u")},m(o,r){B(o,e,r),t||(n=P(e,"click",s),t=!0)},p(o,r){l=o},d(o){o&&y(e),t=!1,n()}}}function We(l){let e,i,t,n,s,o,r,u,d,f,a=l[6]?"incl":"included",h,m,g,_,c,p,j,L,q=l[6]?"sort":"sorted",A,z,F,b,O=ye(l[21].code),C=[];for(let I=0;I<O.length;I+=1)C[I]=Ge(Ae(l,O,I));const fe=I=>D(C[I],1,1,()=>{C[I]=null});function et(I){l[17](I,l[21])}let Ie={disabled:!l[3],max:l[0]};l[21].included!==void 0&&(Ie.value=l[21].included),r=new Le({props:Ie}),Q.push(()=>ue(r,"value",et));function tt(I){l[18](I,l[21])}let je={disabled:!l[3],max:l[21].included};l[21].sorted!==void 0&&(je.value=l[21].sorted),c=new Le({props:je}),Q.push(()=>ue(c,"value",tt));let U=l[3]&&$e(l);return{c(){e=E("div"),i=E("div");for(let I=0;I<C.length;I+=1)C[I].c();t=V(),n=E("div"),s=E("div"),o=E("div"),W(r.$$.fragment),d=V(),f=E("label"),h=ve(a),m=V(),g=E("div"),_=E("div"),W(c.$$.fragment),j=V(),L=E("label"),A=ve(q),z=V(),U&&U.c(),F=V(),this.h()},l(I){e=M(I,"DIV",{class:!0,style:!0});var T=S(e);i=M(T,"DIV",{class:!0});var H=S(i);for(let we=0;we<C.length;we+=1)C[we].l(H);H.forEach(y),t=N(T),n=M(T,"DIV",{class:!0});var G=S(n);s=M(G,"DIV",{class:!0});var R=S(s);o=M(R,"DIV",{class:!0});var de=S(o);X(r.$$.fragment,de),de.forEach(y),d=N(R),f=M(R,"LABEL",{for:!0});var Te=S(f);h=ke(Te,a),Te.forEach(y),R.forEach(y),m=N(G),g=M(G,"DIV",{class:!0});var pe=S(g);_=M(pe,"DIV",{class:!0});var De=S(_);X(c.$$.fragment,De),De.forEach(y),j=N(pe),L=M(pe,"LABEL",{for:!0});var Oe=S(L);A=ke(Oe,q),Oe.forEach(y),pe.forEach(y),G.forEach(y),z=N(T),U&&U.l(T),F=N(T),T.forEach(y),this.h()},h(){v(i,"class","code svelte-385h2u"),v(o,"class","included svelte-385h2u"),v(f,"for","included"),v(s,"class","flex column"),v(_,"class","sorted svelte-385h2u"),v(L,"for","sorted"),v(g,"class","flex column"),v(n,"class","flex svelte-385h2u"),v(e,"class","hint flex center svelte-385h2u"),x(e,"align-items","flex-start")},m(I,T){B(I,e,T),k(e,i);for(let H=0;H<C.length;H+=1)C[H]&&C[H].m(i,null);k(e,t),k(e,n),k(n,s),k(s,o),J(r,o,null),k(s,d),k(s,f),k(f,h),k(n,m),k(n,g),k(g,_),J(c,_,null),k(g,j),k(g,L),k(L,A),k(e,z),U&&U.m(e,null),k(e,F),b=!0},p(I,T){if(l=I,T&14){O=ye(l[21].code);let R;for(R=0;R<O.length;R+=1){const de=Ae(l,O,R);C[R]?(C[R].p(de,T),w(C[R],1)):(C[R]=Ge(de),C[R].c(),w(C[R],1),C[R].m(i,null))}for(ee(),R=O.length;R<C.length;R+=1)fe(R);te()}const H={};T&8&&(H.disabled=!l[3]),T&1&&(H.max=l[0]),!u&&T&2&&(u=!0,H.value=l[21].included,re(()=>u=!1)),r.$set(H),(!b||T&64)&&a!==(a=l[6]?"incl":"included")&&Me(h,a);const G={};T&8&&(G.disabled=!l[3]),T&2&&(G.max=l[21].included),!p&&T&2&&(p=!0,G.value=l[21].sorted,re(()=>p=!1)),c.$set(G),(!b||T&64)&&q!==(q=l[6]?"sort":"sorted")&&Me(A,q),l[3]?U?U.p(l,T):(U=$e(l),U.c(),U.m(e,F)):U&&(U.d(1),U=null)},i(I){if(!b){for(let T=0;T<O.length;T+=1)w(C[T]);w(r.$$.fragment,I),w(c.$$.fragment,I),b=!0}},o(I){C=C.filter(Boolean);for(let T=0;T<C.length;T+=1)D(C[T]);D(r.$$.fragment,I),D(c.$$.fragment,I),b=!1},d(I){I&&y(e),Ke(C,I),K(r),K(c),U&&U.d()}}}function Xe(l){let e,i="+",t,n;return{c(){e=E("button"),e.textContent=i,this.h()},l(s){e=M(s,"BUTTON",{id:!0,style:!0,"data-svelte-h":!0}),Z(e)!=="svelte-sxuadl"&&(e.textContent=i),this.h()},h(){v(e,"id","addButton"),x(e,"margin","1.5rem"),x(e,"padding",".2rem 1rem")},m(s,o){B(s,e,o),t||(n=P(e,"click",l[9]),t=!0)},p:$,d(s){s&&y(e),t=!1,n()}}}function Je(l){let e,i;return e=new Lt({props:{$$slots:{default:[Tt]},$$scope:{ctx:l}}}),{c(){W(e.$$.fragment)},l(t){X(e.$$.fragment,t)},m(t,n){J(e,t,n),i=!0},p(t,n){const s={};n&1048576&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){i||(w(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){K(e,t)}}}function Tt(l){let e;const i=l[12].footer,t=he(i,l,l[20],Be);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&1048576)&&me(t,i,n,n[20],e?ge(i,n[20],s,Ct):_e(n[20]),Be)},i(n){e||(w(t,n),e=!0)},o(n){D(t,n),e=!1},d(n){t&&t.d(n)}}}function Dt(l){let e,i,t,n,s="",o,r,u,d,f;i=new yt({props:{minimizable:!0,$$slots:{default:[jt]},$$scope:{ctx:l}}});let a=ye(l[1]??[]),h=[];for(let c=0;c<a.length;c+=1)h[c]=We(ze(l,a,c));const m=c=>D(h[c],1,1,()=>{h[c]=null});let g=l[3]&&Xe(l),_=l[11].footer&&Je(l);return{c(){e=E("div"),W(i.$$.fragment),t=V(),n=E("div"),n.innerHTML=s,o=V(),r=E("div");for(let c=0;c<h.length;c+=1)h[c].c();u=V(),g&&g.c(),d=V(),_&&_.c(),this.h()},l(c){e=M(c,"DIV",{class:!0});var p=S(e);X(i.$$.fragment,p),t=N(p),n=M(p,"DIV",{style:!0,"data-svelte-h":!0}),Z(n)!=="svelte-1kttkqm"&&(n.innerHTML=s),o=N(p),r=M(p,"DIV",{class:!0});var j=S(r);for(let L=0;L<h.length;L+=1)h[L].l(j);j.forEach(y),u=N(p),g&&g.l(p),d=N(p),_&&_.l(p),p.forEach(y),this.h()},h(){x(n,"margin","1rem"),v(r,"class","hints"),v(e,"class","bigbox flex column center svelte-385h2u")},m(c,p){B(c,e,p),J(i,e,null),k(e,t),k(e,n),k(e,o),k(e,r);for(let j=0;j<h.length;j+=1)h[j]&&h[j].m(r,null);k(e,u),g&&g.m(e,null),k(e,d),_&&_.m(e,null),f=!0},p(c,[p]){const j={};if(p&1050751&&(j.$$scope={dirty:p,ctx:c}),i.$set(j),p&335){a=ye(c[1]??[]);let L;for(L=0;L<a.length;L+=1){const q=ze(c,a,L);h[L]?(h[L].p(q,p),w(h[L],1)):(h[L]=We(q),h[L].c(),w(h[L],1),h[L].m(r,null))}for(ee(),L=a.length;L<h.length;L+=1)m(L);te()}c[3]?g?g.p(c,p):(g=Xe(c),g.c(),g.m(e,d)):g&&(g.d(1),g=null),c[11].footer?_?(_.p(c,p),p&2048&&w(_,1)):(_=Je(c),_.c(),w(_,1),_.m(e,null)):_&&(ee(),D(_,1,1,()=>{_=null}),te())},i(c){if(!f){w(i.$$.fragment,c);for(let p=0;p<a.length;p+=1)w(h[p]);w(_),f=!0}},o(c){D(i.$$.fragment,c),h=h.filter(Boolean);for(let p=0;p<h.length;p+=1)D(h[p]);D(_),f=!1},d(c){c&&y(e),K(i),Ke(h,c),g&&g.d(),_&&_.d()}}}function Ot(l,e,i){let{$$slots:t={},$$scope:n}=e;const s=lt(t);let{codeLength:o=3,riddle:r,contenteditable:u=!1,base:d=10,showControls:f=!1,fileSettings:a}=e;const h={import:!0,export:!0},m=nt(u?r||[{code:Array.from({length:o},()=>0),included:0,sorted:0}]:r);function g(){const b={code:Array.from({length:o},()=>0),included:0,sorted:0};m.update(O=>O.concat(b))}function _(b){i(0,o=b[0].code.length),m.set(b)}m.subscribe(b=>i(1,r=b));let c=!1;it.subscribe(b=>{i(6,c=b.isMobile)});function p(b){r=b,i(1,r)}function j(b){o=b,i(0,o)}function L(b){d=b,i(2,d)}function q(b,O,C,fe){C[fe]=b,i(1,r)}function A(b,O){l.$$.not_equal(O.included,b)&&(O.included=b,i(1,r))}function z(b,O){l.$$.not_equal(O.sorted,b)&&(O.sorted=b,i(1,r))}const F=b=>{m.update(O=>r.filter((C,fe)=>fe!=b))};return l.$$set=b=>{"codeLength"in b&&i(0,o=b.codeLength),"riddle"in b&&i(1,r=b.riddle),"contenteditable"in b&&i(3,u=b.contenteditable),"base"in b&&i(2,d=b.base),"showControls"in b&&i(4,f=b.showControls),"fileSettings"in b&&i(5,a=b.fileSettings),"$$scope"in b&&i(20,n=b.$$scope)},l.$$.update=()=>{l.$$.dirty&11&&u&&(m.update(b=>r),m.update(b=>b==null?void 0:b.map(O=>{for(;O.code.length!=o;)O.code.length>o?O.code.pop():O.code.push(0);return O})))},[o,r,d,u,f,a,c,h,m,g,_,s,t,p,j,L,q,A,z,F,n]}class Xt extends ne{constructor(e){super(),ie(this,e,Ot,Dt,le,{codeLength:0,riddle:1,contenteditable:3,base:2,showControls:4,fileSettings:5})}}const ae=l=>"0".repeat(l).split("").map(e=>({include:{},exclude:{}})),Ee=l=>l.reduce((e,i)=>({include:{...e.include,...i.include},exclude:{...e.exclude,...i.exclude}}));function Vt(l,e=10,i=!0){const t=l.map(u=>Bt(u,e)),n=l[0].code.length,s=[];function o(u=-1,d=ae(n)){for(const f of t[u+1]){const a=Rt(d,f);a&&(u+1==t.length-1?s.push(a):o(u+1,a))}}o();const r=s.map(u=>Nt(u,e)).filter(u=>u);return i?r:r.filter(u=>!u.some((d,f,a)=>a.indexOf(d)!=f))}function Nt(l,e=10){const i=s=>l.reduce((o,r)=>o+Object.keys(r.include).map(Math.floor).filter(u=>u==s).length,0),t=()=>l.flatMap(s=>Object.keys(s.include).map(Math.floor).filter(r=>i(r)==1)),n=()=>l.flatMap(s=>{const o=Object.keys(s.include).map(Math.floor);return o.length==1?o:[]});l.forEach(s=>{if(Object.keys(s.exclude).length==e-1)for(let o=0;o<e;o++)s.exclude[o]||(s.include[o]=!0)});for(let s=t(),o=n(),r=!0;r;s=t()){r=!1;for(const u of s)l.forEach(d=>{for(const f in d.include)f!=u&&d.include[u]&&(delete d.include[f],r=!0)});for(const u of o)l.forEach(d=>{Object.keys(d.include).length>1&&d.include[u]&&(delete d.include[u],r=!0)});o=n()}if(l.every(s=>Object.keys(s.include).length==1))return l.map(s=>Math.floor(Object.keys(s.include)[0]))}function Rt(l,e){const i=St(l,e),t=Ee(i),n=Ee(l),s=Ee(e);if([n,s].every(o=>Object.keys(o.include).every(r=>t.include[r])))return i}function St(l,e){const i=l.length,t=ae(i);for(let n=0;n<i;n++){t[n].include={...l[n].include,...e[n].include},t[n].exclude={...l[n].exclude,...e[n].exclude};for(const s in t[n].include)t[n].include[s]&&t[n].exclude[s]&&delete t[n].include[s]}return t}function Bt(l,e=10){const{code:i,included:t,sorted:n}=l,s=i.length;if(t>s)return[];if(t==0){const d=ae(s);for(const f of d)i.forEach(a=>f.exclude[a]=!0);return[d]}let o=[],r=0;for(let d=0;d<=s-t;d++){let f=[],a={};for(a[d]=i[d],f.push(a);Object.keys(f.slice(-1)[0]).length<t;){const h=[];for(const m of f){const g=Object.keys(m).length,_=Math.floor(Object.keys(m).sort((c,p)=>p-c)[0]);for(let c=_+1;c<=s-(t-g);c++){const p={...m};if(p[c]=i[c],h.push(p),r++,r>=1e3)return o}}f=h}o=o.concat(f)}const u=[];for(const d of o){if(n==0){const a=ae(s);for(const m in d)for(let g=0;g<s;g++)g==m?a[g].exclude[i[m]]=!0:a[g].include[i[m]]=!0;const h=i.filter(m=>!Object.values(d).includes(m));a.forEach(m=>{h.forEach(g=>{m.exclude[g]=!0})}),u.push(a);continue}const f=[...xe(Object.keys(d).map(a=>Math.floor(a)),n)];for(const a of f){const h=ae(s);for(const _ of a)h[_].include[i[_]]=!0,"0".repeat(e).split("").map((c,p)=>p).filter(c=>c!=i[_]).forEach(c=>h[_].exclude[c]=!0);const m=Object.keys(d).map(Math.floor).filter(_=>!a.includes(_));for(const _ of m)for(let c=0;c<s;c++)c==_?h[c].exclude[i[_]]=!0:a.includes(c)||(h[c].include[i[_]]=!0);const g=i.filter(_=>!Object.values(d).includes(_));h.forEach(_=>{g.forEach(c=>{_.exclude[c]=!0})}),u.push(h)}}return u}function*xe(l,e){for(let i=0;i<l.length;i++)if(e===1)yield[l[i]];else{const t=xe(l.slice(i+1,l.length),e-1);for(let n of t)yield[l[i],...n]}}const zt=l=>l[Math.floor(Math.random()*l.length)],At=l=>l.sort((e,i)=>Math.random()<.5?-1:1);function Ut(l={}){let{solution:e,codeLength:i,maxHints:t,base:n,debug:s,maxTries:o,nullFunc:r}=l;s&&console.time("total"),i=i||3,t=t&&t>1?t:5,n=n||10,s=!!s,o=o||-1,(!e||i!=e.length)&&(e="0".repeat(i).split("").map(h=>Math.floor(Math.random()*n)));const u=e.filter((h,m,g)=>g.indexOf(h)==m).length,d=[];let f,a=0;s&&console.log(`solution: ${e.join(", ")} | maxIncluded: ${u}`);do{if(r&&r())return null;d.length>=t&&d.splice(0,d.length);const h=Math.floor(Math.random()*(u+1)),m=[];let g=h==i?Math.floor(Math.random()*(h-1)):Math.floor(Math.random()*(h+1));s&&console.log(`include ${h} sort ${g}`),s&&console.time("included");for(let c=0;c<h;c++){let p;do p=zt(e);while(m.includes(p));m.push(p)}s&&console.timeEnd("included"),s&&console.time("nonincluded");for(let c=0;c<i-h;c++){let p;do p=Math.floor(Math.random()*n);while(e.includes(p));m.push(p)}s&&console.timeEnd("nonincluded");const _=()=>m.reduce((c,p)=>c+(e.indexOf(p)==m.indexOf(p)?1:0),0);for(s&&console.time("shuffle");_()!=g;)At(m);s&&console.timeEnd("shuffle"),d.push({code:m,included:h,sorted:g}),f=Vt(d,n),a++}while((f.length!=1||!f[0].every((h,m)=>e[m]==h))&&(o==-1||a<o));return s&&console.timeEnd("total"),d}const qt=import.meta.url,Ht=10;onmessage=l=>{const e=Ut({...l.data.options,maxTries:Ht,nullFunc:()=>l.data.resultObj.riddle});e&&postMessage(e),close()};function Jt(l,e,i,t){if(window.Worker){delete i.riddle;for(let n=0;n<e;n++){const s=new Worker(new URL(qt).href,{type:"module"});i.riddle||s.postMessage({options:l,resultObj:i}),s.onmessage=o=>{i.riddle||(i.riddle=o.data,t())}}}}export{Xt as R,Jt as g,Vt as s};
